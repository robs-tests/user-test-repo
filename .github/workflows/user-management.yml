on:
  workflow_dispatch:
  push:
    
jobs:
  add-user:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/github-script@v5
        with: 
          github-token: ${{ secrets.GITHUB_TOKEN }}
          script: |  
            const repo = "${{ github.repository }}".split('/')[1]
            const owner = "${{ github.repository_owner }}"
            const userFile = "users.yml"
            
            console.log(`repo = ${repo}`)
            try {
              const {data: yml} = await client.rest.repos.getContent({
                owner: owner,
                repo: name,
                path: userFile
              })
              console.log(`repo = ${repo}`)
              console.log(`yml result = ${yml}`)
              console.log(`end`)
              
            } catch (error) {
              core.debug(`No ${userFile} file found in repository: ${repo}`)
            }
